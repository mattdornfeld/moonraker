# syntax=docker/dockerfile:1.0.0-experimental
FROM nvidia/cuda:10.0-cudnn7-runtime-ubuntu18.04 

RUN apt-get update && \
	apt-get install python3 git libgomp1-y && \
	mkdir app /var/log/sacred_tensorboard /var/moonraker_models

ADD ./ /app

WORKDIR /app

RUN --mount=type=secret,id=gitlab_credentials.ini \ 
	python3 setup.py install --gpu
