# syntax=docker/dockerfile:1.0.0-experimental
FROM registry.gitlab.com/moonraker/base_images/coinbase_train_gpu:0.1.0-8b66cccc0d0ff7e222a5718dd08300e99a3172e1

ENV PYTHONPATH=/app LANG=C.UTF-8

ADD ./ /app

WORKDIR /app

RUN --mount=type=secret,id=gitlab_credentials.ini \
	make install-gpu && \
	chmod -R o+rx /usr/local/lib/python3.7/dist-packages/ray*
