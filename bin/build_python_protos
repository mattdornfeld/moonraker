#!/bin/bash
PROTOS_DIR=./python

mkdir -p $PROTOS_DIR/scalapb

python3 -m grpc_tools.protoc \
    -I scala/common/src/main/protobuf \
    --mypy_out=$PROTOS_DIR \
    --python_out=$PROTOS_DIR \
    --grpc_python_out=$PROTOS_DIR \
    scala/common/src/main/protobuf/events.proto

python3 -m grpc_tools.protoc \
    -I scala/common/src/main/protobuf \
    --mypy_out=$PROTOS_DIR \
    --python_out=$PROTOS_DIR \
    --grpc_python_out=$PROTOS_DIR \
    scala/common/src/main/protobuf/scalapb/scalapb.proto

python3 -m grpc_tools.protoc \
    -I scala/common/src/main/protobuf \
    --mypy_out=$PROTOS_DIR \
    --python_out=$PROTOS_DIR \
    --grpc_python_out=$PROTOS_DIR \
    scala/common/src/main/protobuf/fakebase.proto

python3 -m grpc_tools.protoc \
    -I scala/common/src/main/protobuf \
    --mypy_out=$PROTOS_DIR \
    --python_out=$PROTOS_DIR \
    --grpc_python_out=$PROTOS_DIR \
    scala/common/src/main/protobuf/environment.proto
