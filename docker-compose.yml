version: '3'
services:

  train:
    build: 
      context: .
    image: 'registry.gitlab.com/moonraker/coinbase_train/coinbase_train:latest'
    volumes:
      - /var/log/sacred_tensorboard:/var/log/sacred_tensorboard
      - /var/moonraker_models:/var/moonraker_models
    entrypoint: python3 train.py
    env_file:
     - secrets.env
    networks:
      - infrastructure_moonraker

networks:
  infrastructure_moonraker:
    external: true
